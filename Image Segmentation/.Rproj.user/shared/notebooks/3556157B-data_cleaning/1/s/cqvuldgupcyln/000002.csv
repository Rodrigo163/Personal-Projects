"0","#counting and creating the dataframe"
"0","# if the student changed from w1 to w2 but then returned to previous school in w3 we only count it as one change."
"0",""
"0","count_shool_changes <- c(rep(0,length(ptable$ID))) "
"0","for (i in 1:length(ptable$ID)){"
"0","  if (ptable$School1[i] != ptable$School2[i]){"
"0","    count_shool_changes[i] = count_shool_changes[i] + 1 "
"0","  }"
"0","  if ((ptable$School3[i] != ptable$School2[i]) && ((ptable$School3[i] != ptable$School1[i]))){"
"0","    count_shool_changes[i] = count_shool_changes[i] + 1 "
"0","  }"
"0","}"
"0",""
"0","#doing summary"
"0","counts <- c(sum(count_shool_changes==0)/length(ptable$ID)*100,sum(count_shool_changes==1)/length(ptable$ID)*100, sum(count_shool_changes==2)/length(ptable$ID)*100)"
"0",""
"0",""
"0","#saving data in final table"
"0","School_changes <- data.frame(ID = ptable$ID, n_school_changes = count_shool_changes, Summary = c(c('Never changed school', 'Changed school once', 'Changed school twice'), rep('-',length(ptable$ID)-3 )), Percentages = c( counts, rep('-',length(ptable$ID)-3)))"
"0",""
"0","write.csv(School_changes, 'Y:/eco_redhead/LoRDIA/database/School_changes.csv', row.names = FALSE)"
