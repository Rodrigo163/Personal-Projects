"0","#using this we can see what we're dealing with"
"0","#table(unique(ptable$School1))"
"0","#we see that the first 3 character are unique to every school so we can use that to classify them."
"0","ptable$School1 <- tolower(df_original$V1_E_Skola)"
"0","uniq <- c(""Apladalsskolan"",""Önnerödsskolan"",""Åsenhögaskolan"",""Åvikenskolan"", ""Asklanda"", ""Bäckaskolan"", ""Båtsmansskolan"", ""Borbackaskolan"", ""Bredarydsskolan"", ""Djupedalsskolan"", ""Ekdalaskolan"", ""Forshedaskolan"", ""Fridaskolan"", ""Fridhemskolan"", ""Gällaryds skola"", ""Gröndalsskolan"", ""Gullhögskolan"", ""Hångerskola"", ""Hanahöjskolan"", ""Hillerstorpsskolan"", ""Hols skola "", ""Horda"", ""Kärda skola"", ""Kesberg"", ""Kulltorpsskolan"", ""Landvetterskolan"", ""Lena skola"", ""Nårunga"", ""Nissaforsskolan"", ""Rävlandaskolan"", ""Rydaholmskola"", ""Samskolan i Göteborg"", ""Vårberg"", ""Hulebäcksgymnasiet"", ""Skolgång hemma"")"
"0","table(unique(df_original$V1_E_Skola))"
"1","
"
"1","                     "
"1","      ApladaIsskolan "
"1","       Apladalskolan "
"1","      Apladalsskolan "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","      Åsenhögaskolan "
"1","            Asklanda "
"1","        Åvikenskolan "
"1","         Bäckaskolan "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","       Båtsmanskolan "
"1","      Båtsmansskolan "
"1","                 Bor "
"1","           Bor skola "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","      Borbackaskolan "
"1","                Bors "
"1","          Bors skola "
"1","            Bredaryd "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","     Bredarydsskolan "
"1","            Djupedal "
"1","      Djupedalskolan "
"1","     Djupedalsskolan "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","              Ekdala "
"1","        Ekdalaskolan "
"1","            Forsheda "
"1","      Forsheda skola "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","      Forshedaskolan "
"1","         Fridaskolan "
"1","             Fridhem "
"1","       Fridhemskolan "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","     Gällaryds skola "
"1","             Gröndal "
"1","       Gröndalskolan "
"1","      Gröndalsskolan "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","           Gullhögen "
"1","           GULLHÖGFN "
"1","       Gullhögskolan "
"1","       Hanahöjskolan "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","              Hånger "
"1","         Hångerskola "
"1","         Hillerstorp "
"1","   Hillerstorpskolan "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","  Hillerstorpsskolan "
"1","                 Hol "
"1","          Hols skola "
"1","               Horda "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","         Kärda skola "
"1","             Kesberg "
"1","     Kulltorpsskolan "
"1","          Landvetter "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","    Landvetterskolan "
"1","                Lena "
"1","          Lena skola "
"1","             Nårunga "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","           Nissafors "
"1","     Nissaforsskolan "
"1","             Önneröd "
"1","       Önnerödskolan "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","      Önnerödsskolan "
"1","            Rävlanda "
"1","      Rävlanda skola "
"1","       Rävlandaskola "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","      Rävlandaskolan "
"1","             Rydahol "
"1","            Rydaholm "
"1","      Rydaholm skola "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","     Rydaholms skola "
"1","    Rydaholms skolan "
"1","       Rydaholmskola "
"1","Samskolan i Göteborg "
"1","
"
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","                   1 "
"1","
"
"1","             Vårberg "
"1","
"
"1","                   1 "
"1","
"
"0","#creating schoole table with full name and string ID = first 3 characters"
"0","sctable <- tibble(fullname=uniq, short=c(rep(0, length(uniq))))"
"0","for (i in 1:length(sctable$fullname)){"
"0","  sctable[i,2] <- tolower(substring(sctable[i,1], 1, 3))"
"0","}"
"0",""
"0","#checking if we have duplicates"
"0","sum(duplicated(sctable$short))"
"1","[1]"
"1"," 1"
"1","
"
"0","#after checking we see that the problem comes from Fridaskolan and Fridhemskolan"
"0","#we'll name one of them differently"
"0","sctable$short[14] <- ""fridh"""
"0","sum(duplicated(sctable$short))"
"1","[1]"
"1"," 0"
"1","
"
"0","#reducing all school names in the people table"
"0","#temp needed to avoid problems with NA in original file"
"0","temp <- vector()"
"0",""
"0","for (i in 1:length(ptable$School1)){"
"0","  current <- nchar(toString(ptable$School1[i]))"
"0","  if (current == 1){"
"0","   temp <- c(temp,0)"
"0","  }else{"
"0","    if ((toString(ptable$School1[i])==""fridhemskolan"") | (toString(ptable$School1[i])==""fridhem"") ){"
"0","      temp <- c(temp,""fridh"")"
"0","    }else if(toString(ptable$School1[i])==""hiilerstorp""){"
"0","      temp <- c(temp, ""hil"")"
"0","    }else{"
"0","      temp <- c(temp, substring(toString(ptable$School1[i]), 1, 3)) "
"0","    }"
"0","  }"
"0","}"
"0","#once temp looks like we want it too we copy it to our df"
"0","ptable$School1 <- temp"
